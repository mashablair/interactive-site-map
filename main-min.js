!function($){"use strict";function e(){function e(){console.log("available units: "+Z.length)}function te(){}t=$("#more-filters"),i=$("#more-filters-btn"),s=$(".more-filters-container"),o=$("#clear-all-filters"),l=$("#apply-filters-btn"),Z=$(".available-unit"),ee=$(".all-available-units"),r=$(".svg-container__part3 .available-unit").length,c=$(".svg-container__part2 .available-unit").length,d=$(".svg-container__part1 .available-unit").length,n=$("#filter-bedrooms"),u=$(".filter-selections"),f=$("#filter-max-rent"),k=$("#filter-bathrooms"),T=$("#filter-available-date"),a=$(".nav-icon"),y=$("#interactive-site-map"),F=$(".first-view-btn"),P=$(".second-view-btn"),L=$(".second-expanded-view-btn"),M=$(".third-view-btn"),V=$(".views"),N=$(".first-view"),I=$(".second-view"),U=$(".first-view svg"),D=$(".link-for-blocks"),R=$(".first-view .link-for-blocks"),z=$(".back-btn"),A=$(".second-view-header"),E=$(".level--1"),B=$(".levelnav"),O=$(".levelnav__button--up"),j=$(".levelnav__button--down"),q=$(".levelnav__button--all-levels"),G=!1,H=!1,K=$(".levels"),W=$(".level"),e(),t.find(":focusable").attr("tabindex","-1"),u.hide(),$('[data-toggle="popover"]').popover("show"),$(".first-view h2").on("click",function(){ae.showPopovers()}),$(window).resize(function(){ae.hidePopovers(),clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){ae.showPopovers()},800)}),$("#unitDetailTabs a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(".carousel").carousel();var ae={navigateTabs:function(){a.removeClass("active-tab")},navigateToFirstView:function(){ae.hidePopovers(),y.removeClass("view-change-1 view-change-2"),ae.showPopovers(),ae.navigateTabs(),F.addClass("active-tab"),setTimeout(function(){ae.showPopovers()},800)},navigateToSecondView:function(){y.hasClass("view-change-1")||(y.addClass("view-change-1").removeClass("view-change-2"),ae.navigateTabs(),P.addClass("active-tab"),ae.hidePopovers(),setTimeout(function(){ae.showPopovers()},800))},navigateToSecondExpandedView:function(){y.addClass("view-change-1").removeClass("view-change-2"),ae.navigateTabs(),L.addClass("active-tab"),E.trigger("click"),$('[data-toggle="popover"]').popover("show")},navigateToThirdView:function(){y.addClass("view-change-1 view-change-2"),ae.navigateTabs(),M.addClass("active-tab"),I.addClass("expanded-view-with-detail")},showFirstStack:function(){I.removeClass("second-view__part2 second-view__part3"),I.addClass("second-view__part1"),j.addClass("boxbutton--disabled"),O.removeClass("boxbutton--disabled"),N.addClass("first-stack-displayed"),N.removeClass("second-stack-displayed third-stack-displayed"),A.text("Floors 1 - 4 (Lower Third)")},showSecondStack:function(){I.removeClass("second-view__part1 second-view__part3"),I.addClass("second-view__part2"),O.removeClass("boxbutton--disabled"),j.removeClass("boxbutton--disabled"),N.addClass("second-stack-displayed"),N.removeClass("first-stack-displayed third-stack-displayed"),A.text("Floors 5 - 8 (Middle Third)")},showThirdStack:function(){I.removeClass("second-view__part1 second-view__part2"),I.addClass("second-view__part3"),O.addClass("boxbutton--disabled"),j.removeClass("boxbutton--disabled"),N.addClass("third-stack-displayed"),N.removeClass("first-stack-displayed second-stack-displayed"),A.text("Floors 9 - 12 (Upper Third)")},setPopovers:function(e){J=$("."+e).find(".popover").addClass("first-view-popovers"),D.each(function(e){$(this).attr("id","link"+e)}),J.each(function(e){$(this).attr("id","popover"+e)})},showPopovers:function(){R.popover("show"),ae.setInitialPopoversNumbers()},getInitialRentPricesRange:function(){var e=[],t=[],a=[];$(".svg-container__part3 [data-rentprice]").each(function(){e.push($(this).attr("data-rentprice"))}),$(".svg-container__part2 [data-rentprice]").each(function(){t.push($(this).attr("data-rentprice"))}),$(".svg-container__part1 [data-rentprice]").each(function(){a.push($(this).attr("data-rentprice"))}),w=Math.min.apply(Math,a),m=Math.min.apply(Math,t),g=Math.min.apply(Math,e),_=Math.max.apply(Math,a),C=Math.max.apply(Math,t),x=Math.max.apply(Math,e)},setInitialPopoversNumbers:function(){$("#popover0 .popover-availability span").text(r),$("#popover1 .popover-availability span").text(c),$("#popover2 .popover-availability span").text(d),ee.each(function(){$(this).attr("class","map__space all-available-units available-unit")}),$("#popover0 .min-rent").text(g),$("#popover0 .max-rent").text(x),$("#popover1 .min-rent").text(m),$("#popover1 .max-rent").text(C),$("#popover2 .min-rent").text(w),$("#popover2 .max-rent").text(_)},hidePopovers:function(){R.popover("hide")},showLevel:function(){Y=$("[data-levelnum]").length,K.addClass("levels--open levels--selected-"+Q),ae.navigateTabs(),L.addClass("active-tab"),X=A.text();var e=$(".level--current").attr("data-floor");A.text("Floor "+e).css("color","#04b5fd"),z.addClass("hidden"),q.removeClass("hidden"),ae.setNavigationState(),G=!0},setNavigationState:function(){1===Q?j.addClass("boxbutton--disabled"):j.removeClass("boxbutton--disabled"),Q===Y?O.addClass("boxbutton--disabled"):O.removeClass("boxbutton--disabled")},showStackedLevels:function(){if(!G)return!1;G=!1,K.removeClass("levels--open levels--selected-"+Q),$(".level--current").removeClass("level--current"),z.removeClass("hidden"),q.addClass("hidden"),ae.navigateTabs(),P.addClass("active-tab"),I.hasClass("second-view__part1")?A.text("Floors 1 - 4 (Lower Third)"):I.hasClass("second-view__part2")?A.text("Floors 5 - 8 (Middle Third)"):I.hasClass("second-view__part3")&&A.text("Floors 9 - 12 (Upper Third)"),A.css("color","")},navigate:function(e){if(!G)return!1;H=!0,console.log("selectedLevel is "+Q);var t=Q;console.log("prevSelectedLevel "+t),console.log(W);var a=$(".level--"+Q);if(console.log(a),"Up"===e&&t>1)--Q,console.log("selectedLevel-- is "+Q);else{if(!("Down"===e&&t<Y))return H=!1,!1;++Q,console.log("selectedLevel++ is "+Q)}ae.setNavigationState(),a.addClass("level--moveOut"+e);var i=Q;console.log("nextLevelNum is "+i);var s=$(".level--"+i);console.log(s),s.addClass("level--current"),a.removeClass("level--moveOut"+e),setTimeout(function(){a.removeClass("level--current")},60),K.removeClass("levels--selected-"+t),K.addClass("levels--selected-"+Q),A.text("Floor "+Q),H=!1},expandFilters:function(){t.hasClass("open")?(s.animate({opacity:0},200,function(){t.removeClass("open").addClass("hidden-from-interaction"),ae.showPopovers()}),i.text("+ More Filters"),t.find(":focusable").attr("tabindex","-1"),S>0&&u.slideDown()):(t.addClass("open").removeClass("hidden-from-interaction").find(":focusable").attr("tabindex","0").eq(0).focus(),$(this).text("- Less Filters"),s.delay(200).animate({opacity:1},200),ae.hidePopovers(),u.slideUp())},resetFilters:function(){t.find(":input",":checkbox").val("").prop("checked",!1).prop("selected",!1),$("#any-ba").prop("checked",!0),u.slideUp().html(""),S=0},applyFilters:function(){ae.expandFilters(),u.slideDown(300).html(""),ae.buildActiveFiltersList()},buildActiveFiltersList:function(){b='<ul class="filter-selections__ul flex-container">',S=0,""!==f.val()&&(b+="<li>Max Rent: $"+f.val()+' <button class="delete-filter-btn delete-filter-btn__max-rent transparent-btn"><i class="iconm-cancel-circle2 close-tag-icon"></i></button></li>',S++),"all"!==k.val()&&(b+="<li>"+k.val()+' <button class="delete-filter-btn delete-filter-btn__bathrooms transparent-btn"><i class="iconm-cancel-circle2 close-tag-icon"></i></button></li>',S++),"all"!==T.val()&&(b+="<li> Move In Date: "+T.find("option:selected").text()+' <button class="delete-filter-btn delete-filter-btn__move-date transparent-btn"><i class="iconm-cancel-circle2 close-tag-icon"></i></button></li>',S++),t.find("input[type=checkbox]").each(function(){$(this).is(":checked")&&(console.log($(this).val()),b+="<li>"+$(this).val()+' <button class="delete-filter-btn delete-filter-btn__checkbox transparent-btn"><i class="iconm-cancel-circle2 close-tag-icon"></i></button></li>',S++)}),b+="</ul>",0===S?(b=void 0,u.append('<button id="close-filter-msg" class="transparent-btn m-b-sm"><i class="iconm-cancel-circle2 close-tag-icon"></i></button><p class="m-b-none blue text-uppercase" style="line-height:29px">You did not select any filters.</p>').css("display","flex")):u.append(b)},calculateFilteredBedrooms:function(e){ee.each(function(){$(this).attr("class","map__space all-available-units available-unit"),$(this).removeAttr("data-filter")}),console.log("recalculate all available units before applying filter: "+Z.length),console.log("number of data-filter elems: "+$("[data-filter]").length),v=$('.svg-container__part3 .available-unit[data-bedroom="'+e+'"]'),p=$('.svg-container__part2 .available-unit[data-bedroom="'+e+'"]'),h=$('.svg-container__part1 .available-unit[data-bedroom="'+e+'"]'),v.each(function(){$(this).attr("data-filter","true")}),p.each(function(){$(this).attr("data-filter","true")}),h.each(function(){$(this).attr("data-filter","true")}),console.log("number of units with active filter: "+$("[data-filter]").length),$(".second-view .all-available-units").not("[data-filter]").each(function(){$(this).attr("class","map__space all-available-units")})},updatePopoversFilteredNumbers:function(){$("#popover0 .popover-availability span").text(v.length),$("#popover1 .popover-availability span").text(p.length),$("#popover2 .popover-availability span").text(h.length)}};ae.setPopovers("first-view"),ae.getInitialRentPricesRange(),ae.setInitialPopoversNumbers(),a.on("click",ae.navigateTabs),i.on("click",ae.expandFilters),o.on("click",function(){ae.resetFilters(),ae.expandFilters()}),l.on("click",ae.applyFilters),u.on("click","#close-filter-msg",function(){u.slideUp().html("")}),u.on("click",".delete-filter-btn",function(){if($(this).parent().remove(),S--,0===S&&(u.slideUp().html(""),ae.resetFilters()),$(this).hasClass("delete-filter-btn__checkbox")){var e=$(this).parent().text();t.find(":checkbox[value='"+$.trim(e)+"']").prop("checked",!1)}else $(this).hasClass("delete-filter-btn__max-rent")?f.val(""):$(this).hasClass("delete-filter-btn__bathrooms")?k.find("option:selected").prop("selected",!1):$(this).hasClass("delete-filter-btn__move-date")&&T.find("option:selected").prop("selected",!1)}),n.on("change",function(){var e=this.value;"all"!==e?(ae.calculateFilteredBedrooms(e),ae.updatePopoversFilteredNumbers()):ae.setInitialPopoversNumbers()}),F.on("click",ae.navigateToFirstView),P.on("click",function(){G?ae.showStackedLevels():ae.navigateToSecondView()}),L.on("click",ae.navigateToSecondExpandedView),M.on("click",ae.navigateToThirdView),D.on({hover:function(){var e=$(this).attr("id"),t=e.substr(e.length-1);$("#popover"+t).find(".popover-title").addClass("in-focus")},mouseout:function(){$(".first-view-popovers .popover-title").removeClass("in-focus")}}),D.on("click",function(){G&&ae.showStackedLevels(),"link0"===$(this).attr("id")?ae.showThirdStack():"link1"===$(this).attr("id")&&ae.showSecondStack(),"link2"===$(this).attr("id")&&ae.showFirstStack(),ae.navigateToSecondView()}),$(".first-view-popovers").on("click",function(){console.log("popover clicked"),"popover0"===$(this).attr("id")?ae.showThirdStack():"popover1"===$(this).attr("id")&&ae.showSecondStack(),"popover2"===$(this).attr("id")&&ae.showFirstStack(),G&&ae.showStackedLevels(),ae.navigateToSecondView()}),z.on("click",function(){G?ae.showStackedLevels():$(window).width()>=1400?(ae.navigateToSecondView(),I.removeClass("expanded-view-with-detail")):(ae.navigateToFirstView(),I.removeClass("expanded-view-with-detail"))}),W.on("click",function(){$(this).addClass("level--current"),Q=parseInt($(this).attr("data-levelnum"),10),console.log("selectedLevel is "+Q),ae.showLevel()}),O.on("click",function(){G?ae.navigate("Down"):I.hasClass("second-view__part1")?ae.showSecondStack():I.hasClass("second-view__part2")&&ae.showThirdStack()}),j.on("click",function(){G?ae.navigate("Up"):I.hasClass("second-view__part3")?ae.showSecondStack():I.hasClass("second-view__part2")&&ae.showFirstStack()}),q.on("click",function(){ae.showStackedLevels(),ae.navigateToSecondView()}),Z.on("click",function(e){e.stopPropagation(),$(".second-view").addClass("expanded-view-with-detail"),ae.navigateToThirdView()})}var t,a,i,s,o,l,n,r,c,d,v,p,h,u,b,f,w,m,g,_,C,x,k,T,S,y,F,P,L,M,V,N,I,U,D,R,z,A,B,E,O,j,q,Q,Y,G,H,J,K,W,X,Z,ee;$(document).ready(e)}(jQuery);