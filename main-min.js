!function($){"use strict";function e(){a=$("#more-filters"),t=$(".nav-icon"),i=$("#more-filters-btn"),n=$(".more-filters-container"),l=$("#clear-all-filters"),d=$("#interactive-site-map"),c=$(".first-view-btn"),r=$(".second-view-btn"),v=$(".second-expanded-view-btn"),h=$(".third-view-btn"),w=$(".views"),p=$(".first-view"),u=$(".second-view"),f=$(".first-view svg"),b=null,C=$(".link-for-blocks"),k=$(".first-view .link-for-blocks"),g=$(".back-btn"),m=$(".second-view-header"),_=$(".level--1"),T=$(".levelnav"),S=$(".levelnav__button--up"),x=$(".levelnav__button--down"),F=$(".levelnav__button--all-levels"),L=null,y=null,V=!1,P=!1,D=null,N=$(".levels"),U=$(".level"),z=null,M=$(".available-unit"),a.find(":focusable").attr("tabindex","-1");var e=location.href;console.log(e),$('[data-toggle="popover"]').popover("show"),o("first-view"),$(".first-view h2").on("click",function(){s.showPopovers()}),$(window).resize(function(){s.hidePopovers(),clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){s.showPopovers()},800)}),$("#unitDetailTabs a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(".carousel").carousel();var s={navigateTabs:function(){t.removeClass("active-tab")},navigateToFirstView:function(){s.hidePopovers(),d.removeClass("view-change-1 view-change-2"),s.showPopovers(),s.navigateTabs(),c.addClass("active-tab"),setTimeout(function(){s.showPopovers()},800)},navigateToSecondView:function(){d.hasClass("view-change-1")||(d.addClass("view-change-1").removeClass("view-change-2"),s.navigateTabs(),r.addClass("active-tab"),s.hidePopovers(),setTimeout(function(){s.showPopovers()},800))},navigateToSecondExpandedView:function(){d.addClass("view-change-1").removeClass("view-change-2"),s.navigateTabs(),v.addClass("active-tab"),_.trigger("click"),$('[data-toggle="popover"]').popover("show")},navigateToThirdView:function(){d.addClass("view-change-1 view-change-2"),s.navigateTabs(),h.addClass("active-tab"),u.addClass("expanded-view-with-detail")},showFirstStack:function(){u.removeClass("second-view__part2 second-view__part3"),u.addClass("second-view__part1"),x.addClass("boxbutton--disabled"),S.removeClass("boxbutton--disabled"),p.addClass("first-stack-displayed"),p.removeClass("second-stack-displayed third-stack-displayed"),m.text("Floors 1 - 4 (Lower Third)")},showSecondStack:function(){u.removeClass("second-view__part1 second-view__part3"),u.addClass("second-view__part2"),S.removeClass("boxbutton--disabled"),x.removeClass("boxbutton--disabled"),p.addClass("second-stack-displayed"),p.removeClass("first-stack-displayed third-stack-displayed"),m.text("Floors 5 - 8 (Middle Third)")},showThirdStack:function(){u.removeClass("second-view__part1 second-view__part2"),u.addClass("second-view__part3"),S.addClass("boxbutton--disabled"),x.removeClass("boxbutton--disabled"),p.addClass("third-stack-displayed"),p.removeClass("first-stack-displayed second-stack-displayed"),m.text("Floors 9 - 12 (Upper Third)")},showPopovers:function(){k.popover("show")},hidePopovers:function(){k.popover("hide")},showLevel:function(){y=$("[data-levelnum]").length,N.addClass("levels--open levels--selected-"+L),s.navigateTabs(),v.addClass("active-tab"),z=m.text();var e=$(".level--current").attr("data-floor");m.text("Floor "+e).css("color","#04b5fd"),g.addClass("hidden"),F.removeClass("hidden"),s.setNavigationState(),V=!0},setNavigationState:function(){1===L?x.addClass("boxbutton--disabled"):x.removeClass("boxbutton--disabled"),L===y?S.addClass("boxbutton--disabled"):S.removeClass("boxbutton--disabled")},showStackedLevels:function(){if(!V)return!1;V=!1,N.removeClass("levels--open levels--selected-"+L),$(".level--current").removeClass("level--current"),g.removeClass("hidden"),F.addClass("hidden"),s.navigateTabs(),r.addClass("active-tab"),u.hasClass("second-view__part1")?m.text("Floors 1 - 4 (Lower Third)"):u.hasClass("second-view__part2")?m.text("Floors 5 - 8 (Middle Third)"):u.hasClass("second-view__part3")&&m.text("Floors 9 - 12 (Upper Third)"),m.css("color","")},navigate:function(e){if(!V)return!1;P=!0,console.log("selectedLevel is "+L);var o=L;console.log("prevSelectedLevel "+o),console.log(U);var a=$(".level--"+L);if(console.log(a),"Up"===e&&o>1)--L,console.log("selectedLevel-- is "+L);else{if(!("Down"===e&&o<y))return P=!1,!1;++L,console.log("selectedLevel++ is "+L)}s.setNavigationState(),a.addClass("level--moveOut"+e);var t=L;console.log("nextLevelNum is "+t);var i=$(".level--"+t);console.log(i),i.addClass("level--current"),a.removeClass("level--moveOut"+e),setTimeout(function(){a.removeClass("level--current")},60),N.removeClass("levels--selected-"+o),N.addClass("levels--selected-"+L),m.text("Floor "+L),P=!1},expandFilters:function(){a.hasClass("open")?(n.animate({opacity:0},200,function(){a.removeClass("open").addClass("hidden-from-interaction"),s.showPopovers()}),$(this).text("+ More Filters"),a.find(":focusable").attr("tabindex","-1")):(a.addClass("open").removeClass("hidden-from-interaction").find(":focusable").attr("tabindex","0").eq(0).focus(),$(this).text("- Less Filters"),n.delay(200).animate({opacity:1},200),s.hidePopovers())},resetFilters:function(){$("#map-header, #more-filters").find(":input",":checkbox").val("").prop("checked",!1).prop("selected",!1),$("#any-ba").prop("checked",!0)}};t.on("click",s.navigateTabs),i.on("click",s.expandFilters),l.on("click",s.resetFilters),c.on("click",s.navigateToFirstView),r.on("click",function(){V?s.showStackedLevels():s.navigateToSecondView()}),v.on("click",s.navigateToSecondExpandedView),h.on("click",s.navigateToThirdView),C.on({hover:function(){var e=$(this).attr("id"),s=e.substr(e.length-1);$("#popover"+s).find(".popover-title").addClass("in-focus")},mouseout:function(){$(".first-view-popovers .popover-title").removeClass("in-focus")}}),C.on("click",function(){V&&s.showStackedLevels(),"link0"===$(this).attr("id")?s.showThirdStack():"link1"===$(this).attr("id")&&s.showSecondStack(),"link2"===$(this).attr("id")&&s.showFirstStack(),s.navigateToSecondView()}),$(".first-view-popovers").on("click",function(){"popover0"===$(this).attr("id")?s.showThirdStack():"popover1"===$(this).attr("id")&&s.showSecondStack(),"popover2"===$(this).attr("id")&&s.showFirstStack(),V&&s.showStackedLevels(),s.navigateToSecondView()}),g.on("click",function(){V?s.showStackedLevels():$(window).width()>=1400?(s.navigateToSecondView(),u.removeClass("expanded-view-with-detail")):(s.navigateToFirstView(),u.removeClass("expanded-view-with-detail"))}),U.on("click",function(){$(this).addClass("level--current"),L=parseInt($(this).attr("data-levelnum"),10),console.log("selectedLevel is "+L),s.showLevel()}),S.on("click",function(){V?s.navigate("Down"):u.hasClass("second-view__part1")?s.showSecondStack():u.hasClass("second-view__part2")&&s.showThirdStack()}),x.on("click",function(){V?s.navigate("Up"):u.hasClass("second-view__part3")?s.showSecondStack():u.hasClass("second-view__part2")&&s.showFirstStack()}),F.on("click",function(){s.showStackedLevels(),s.navigateToSecondView()}),M.on("click",function(e){e.stopPropagation(),$(".second-view").addClass("expanded-view-with-detail"),s.navigateToThirdView()})}function s(){}function o(e){D=$("."+e).find(".popover").addClass("first-view-popovers"),C.each(function(e){$(this).attr("id","link"+e)}),D.each(function(e){$(this).attr("id","popover"+e)})}var a,t,i,n,l,d,c,r,v,h,w,p,u,f,b,C,k,g,m,T,_,S,x,F,L,y,V,P,D,N,U,z,M;$(document).ready(e)}(jQuery);