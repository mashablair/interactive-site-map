!function($){"use strict";function e(){t=$("#more-filters"),s=$(".nav-icon"),n=$("#more-filters-btn"),a=$(".more-filters-container"),l=$("#clear-all-filters"),v=$("#interactive-site-map"),c=$(".first-view-btn"),d=$(".second-view-btn"),r=$(".second-expanded-view-btn"),p=$(".third-view-btn"),u=$(".views"),w=$(".first-view svg"),f=null,h=$(".link-for-blocks"),g=$(".first-view .link-for-blocks"),b=$(".back-btn"),C=$(".second-view-header"),k=$(".level--1"),m=$(".levelnav"),T=$(".levelnav__button--up"),x=$(".levelnav__button--down"),V=null,S=null,P=!1,F=!1,L=null,y=$(".levels"),M=$(".level"),N=null,t.find(":focusable").attr("tabindex","-1"),$('[data-toggle="popover"]').popover("show"),i("first-view"),$(".first-view h2").on("click",function(){e.showPopovers()}),$(window).resize(function(){e.hidePopovers(),clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){e.showPopovers()},800)});var e={navigateTabs:function(){s.removeClass("active-tab")},splitViewMode:function(){u.addClass("split-view"),e.repositionPopovers()},noSplitViewMode:function(){u.removeClass("split-view"),e.repositionPopovers()},navigateToFirstView:function(){v.removeClass("view-change-1 view-change-2"),e.showPopovers(),e.navigateTabs(),c.addClass("active-tab"),$(window).width()>=1400&&e.noSplitViewMode()},navigateToSecondView:function(){v.addClass("view-change-1").removeClass("view-change-2"),e.navigateTabs(),d.addClass("active-tab"),$(window).width()>=1400&&e.splitViewMode()},navigateToSecondExpandedView:function(){v.addClass("view-change-1").removeClass("view-change-2"),e.navigateTabs(),r.addClass("active-tab"),k.trigger("click")},navigateToThirdView:function(){v.addClass("view-change-1 view-change-2"),e.navigateTabs(),p.addClass("active-tab"),$(".second-view").addClass("expanded-view-with-detail")},showPopovers:function(){g.popover("show")},hidePopovers:function(){g.popover("hide")},repositionPopovers:function(){this.hidePopovers(),setTimeout(function(){e.showPopovers()},500)},showLevel:function(){S=$("[data-levelnum]").length,y.addClass("levels--open levels--selected-"+V),e.navigateTabs(),r.addClass("active-tab"),N=C.text(),C.text("Floor "+V).css("color","#04b5fd"),m.removeClass("levelnav--hidden"),e.setNavigationState(),P=!0},setNavigationState:function(){console.log("selectedLevel is "+V),console.log("levelsTotal is "+S),1===V?x.addClass("boxbutton--disabled"):x.removeClass("boxbutton--disabled"),V===S?T.addClass("boxbutton--disabled"):T.removeClass("boxbutton--disabled")},showStackedLevels:function(){if(!P)return!1;P=!1,y.removeClass("levels--open levels--selected-"+V),$(".level--current").removeClass("level--current"),m.addClass("levelnav--hidden"),e.navigateTabs(),d.addClass("active-tab"),C.text(N).css("color","")},navigate:function(o){if(!P)return!1;F=!0,console.log("selectedLevel is "+V);var i=V;console.log("prevSelectedLevel "+i),console.log(M);var t=$(".level--"+V);if(console.log(t),"Up"===o&&i>1)--V,console.log("selectedLevel-- is "+V);else{if(!("Down"===o&&i<S))return F=!1,!1;++V,console.log("selectedLevel++ is "+V)}e.setNavigationState(),t.addClass("level--moveOut"+o);var s=V;console.log("nextLevelNum is "+s);var n=$(".level--"+s);console.log(n),n.addClass("level--current"),t.removeClass("level--moveOut"+o),setTimeout(function(){t.removeClass("level--current")},60),y.removeClass("levels--selected-"+i),y.addClass("levels--selected-"+V),C.text("Floor "+V),F=!1},expandFilters:function(){t.hasClass("open")?(a.animate({opacity:0},200,function(){t.removeClass("open"),e.showPopovers()}),$(this).text("+ More Filters"),t.find(":focusable").attr("tabindex","-1")):(t.addClass("open").find(":focusable").attr("tabindex","0").eq(0).focus(),$(this).text("- Less Filters"),a.delay(200).animate({opacity:1},200),e.hidePopovers())},resetFilters:function(){$("#map-header, #more-filters").find(":input",":checkbox").val("").prop("checked",!1).prop("selected",!1),$("#any-ba").prop("checked",!0)}};s.on("click",e.navigateTabs),n.on("click",e.expandFilters),l.on("click",e.resetFilters),w.on("click",e.splitViewMode),c.on("click",e.navigateToFirstView),d.on("click",function(){P?e.showStackedLevels():e.navigateToSecondView()}),r.on("click",e.navigateToSecondExpandedView),p.on("click",e.navigateToThirdView),h.on({hover:function(){var e=$(this).attr("id"),o=e.substr(e.length-1);$("#popover"+o).find(".popover-title").addClass("in-focus")},mouseout:function(){$(".first-view-popovers .popover-title").removeClass("in-focus")}}),h.on("click",e.navigateToSecondView),$(".link-for-blocks, .first-view-popovers .popover-title, .first-view-popovers .popover-availability").on("click",e.navigateToSecondView),b.on("click",function(){P?e.showStackedLevels():e.navigateToFirstView()}),M.on("click",function(){console.log($(this)),$(this).addClass("level--current"),V=parseInt($(this).attr("data-levelnum"),10),console.log("selectedLevel is "+V),e.showLevel()}),T.on("click",function(){e.navigate("Down")}),x.on("click",function(){e.navigate("Up")}),$("#place-to-click").on("click",function(o){o.stopPropagation(),$(".second-view").addClass("expanded-view-with-detail"),e.navigateToThirdView()})}function o(){}function i(e){L=$("."+e).find(".popover").addClass("first-view-popovers"),h.each(function(e){$(this).attr("id","link"+e)}),L.each(function(e){$(this).attr("id","popover"+e)})}var t,s,n,a,l,v,c,d,r,p,u,w,f,h,g,b,C,m,k,T,x,V,S,P,F,L,y,M,N;$(document).ready(e)}(jQuery);