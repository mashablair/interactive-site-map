!function($){"use strict";function e(){a=$("#more-filters"),i=$(".nav-icon"),o=$("#more-filters-btn"),l=$(".more-filters-container"),n=$("#clear-all-filters"),c=$("#apply-filters-btn"),d=$(".filter-selections"),v=$("#filter-max-rent"),p=$("#filter-bathrooms"),h=$("#filter-available-date"),b=$("#interactive-site-map"),f=$(".first-view-btn"),w=$(".second-view-btn"),m=$(".second-expanded-view-btn"),C=$(".third-view-btn"),g=$(".views"),k=$(".first-view"),_=$(".second-view"),x=$(".first-view svg"),T=$(".link-for-blocks"),S=$(".first-view .link-for-blocks"),F=$(".back-btn"),y=$(".second-view-header"),V=$(".level--1"),L=$(".levelnav"),P=$(".levelnav__button--up"),U=$(".levelnav__button--down"),D=$(".levelnav__button--all-levels"),A=!1,z=!1,I=$(".levels"),O=$(".level"),q=$(".available-unit"),a.find(":focusable").attr("tabindex","-1"),d.hide(),$('[data-toggle="popover"]').popover("show"),s("first-view"),$(".first-view h2").on("click",function(){e.showPopovers()}),$(window).resize(function(){e.hidePopovers(),clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){e.showPopovers()},800)}),$("#unitDetailTabs a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(".carousel").carousel();var e={navigateTabs:function(){i.removeClass("active-tab")},navigateToFirstView:function(){e.hidePopovers(),b.removeClass("view-change-1 view-change-2"),e.showPopovers(),e.navigateTabs(),f.addClass("active-tab"),setTimeout(function(){e.showPopovers()},800)},navigateToSecondView:function(){b.hasClass("view-change-1")||(b.addClass("view-change-1").removeClass("view-change-2"),e.navigateTabs(),w.addClass("active-tab"),e.hidePopovers(),setTimeout(function(){e.showPopovers()},800))},navigateToSecondExpandedView:function(){b.addClass("view-change-1").removeClass("view-change-2"),e.navigateTabs(),m.addClass("active-tab"),V.trigger("click"),$('[data-toggle="popover"]').popover("show")},navigateToThirdView:function(){b.addClass("view-change-1 view-change-2"),e.navigateTabs(),C.addClass("active-tab"),_.addClass("expanded-view-with-detail")},showFirstStack:function(){_.removeClass("second-view__part2 second-view__part3"),_.addClass("second-view__part1"),U.addClass("boxbutton--disabled"),P.removeClass("boxbutton--disabled"),k.addClass("first-stack-displayed"),k.removeClass("second-stack-displayed third-stack-displayed"),y.text("Floors 1 - 4 (Lower Third)")},showSecondStack:function(){_.removeClass("second-view__part1 second-view__part3"),_.addClass("second-view__part2"),P.removeClass("boxbutton--disabled"),U.removeClass("boxbutton--disabled"),k.addClass("second-stack-displayed"),k.removeClass("first-stack-displayed third-stack-displayed"),y.text("Floors 5 - 8 (Middle Third)")},showThirdStack:function(){_.removeClass("second-view__part1 second-view__part2"),_.addClass("second-view__part3"),P.addClass("boxbutton--disabled"),U.removeClass("boxbutton--disabled"),k.addClass("third-stack-displayed"),k.removeClass("first-stack-displayed second-stack-displayed"),y.text("Floors 9 - 12 (Upper Third)")},showPopovers:function(){S.popover("show")},updateAvailabilityNumbers:function(){var e=$(".svg-container__part3 .available-unit").length;$("#popover0 .popover-availability span").text(e);var t=$(".svg-container__part2 .available-unit").length;$("#popover1 .popover-availability span").text(t);var s=$(".svg-container__part1 .available-unit").length;$("#popover2 .popover-availability span").text(s)},hidePopovers:function(){S.popover("hide")},showLevel:function(){M=$("[data-levelnum]").length,I.addClass("levels--open levels--selected-"+N),e.navigateTabs(),m.addClass("active-tab"),j=y.text();var t=$(".level--current").attr("data-floor");y.text("Floor "+t).css("color","#04b5fd"),F.addClass("hidden"),D.removeClass("hidden"),e.setNavigationState(),A=!0},setNavigationState:function(){1===N?U.addClass("boxbutton--disabled"):U.removeClass("boxbutton--disabled"),N===M?P.addClass("boxbutton--disabled"):P.removeClass("boxbutton--disabled")},showStackedLevels:function(){if(!A)return!1;A=!1,I.removeClass("levels--open levels--selected-"+N),$(".level--current").removeClass("level--current"),F.removeClass("hidden"),D.addClass("hidden"),e.navigateTabs(),w.addClass("active-tab"),_.hasClass("second-view__part1")?y.text("Floors 1 - 4 (Lower Third)"):_.hasClass("second-view__part2")?y.text("Floors 5 - 8 (Middle Third)"):_.hasClass("second-view__part3")&&y.text("Floors 9 - 12 (Upper Third)"),y.css("color","")},navigate:function(t){if(!A)return!1;z=!0,console.log("selectedLevel is "+N);var s=N;console.log("prevSelectedLevel "+s),console.log(O);var a=$(".level--"+N);if(console.log(a),"Up"===t&&s>1)--N,console.log("selectedLevel-- is "+N);else{if(!("Down"===t&&s<M))return z=!1,!1;++N,console.log("selectedLevel++ is "+N)}e.setNavigationState(),a.addClass("level--moveOut"+t);var i=N;console.log("nextLevelNum is "+i);var o=$(".level--"+i);console.log(o),o.addClass("level--current"),a.removeClass("level--moveOut"+t),setTimeout(function(){a.removeClass("level--current")},60),I.removeClass("levels--selected-"+s),I.addClass("levels--selected-"+N),y.text("Floor "+N),z=!1},expandFilters:function(){a.hasClass("open")?(l.animate({opacity:0},200,function(){a.removeClass("open").addClass("hidden-from-interaction"),e.showPopovers()}),o.text("+ More Filters"),a.find(":focusable").attr("tabindex","-1"),u>0&&d.slideDown()):(a.addClass("open").removeClass("hidden-from-interaction").find(":focusable").attr("tabindex","0").eq(0).focus(),$(this).text("- Less Filters"),l.delay(200).animate({opacity:1},200),e.hidePopovers(),d.slideUp())},resetFilters:function(){a.find(":input",":checkbox").val("").prop("checked",!1).prop("selected",!1),$("#any-ba").prop("checked",!0),d.slideUp().html(""),u=0},applyFilters:function(){e.expandFilters(),d.slideDown(300).html(""),e.buildActiveFiltersList()},buildActiveFiltersList:function(){r='<ul class="filter-selections__ul flex-container">',u=0,""!==v.val()&&(r+="<li>Max Rent: $"+v.val()+' <button class="delete-filter-btn delete-filter-btn__max-rent transparent-btn"><i class="iconm-cancel-circle2 close-tag-icon"></i></button></li>',u++),"all"!==p.val()&&(r+="<li>"+p.val()+' <button class="delete-filter-btn delete-filter-btn__bathrooms transparent-btn"><i class="iconm-cancel-circle2 close-tag-icon"></i></button></li>',u++),"all"!==h.val()&&(r+="<li> Move In Date: "+h.find("option:selected").text()+' <button class="delete-filter-btn delete-filter-btn__move-date transparent-btn"><i class="iconm-cancel-circle2 close-tag-icon"></i></button></li>',u++),a.find("input[type=checkbox]").each(function(){$(this).is(":checked")&&(console.log($(this).val()),r+="<li>"+$(this).val()+' <button class="delete-filter-btn delete-filter-btn__checkbox transparent-btn"><i class="iconm-cancel-circle2 close-tag-icon"></i></button></li>',u++)}),r+="</ul>",0===u?(r=void 0,d.append('<button id="close-filter-msg" class="transparent-btn m-b-sm"><i class="iconm-cancel-circle2 close-tag-icon"></i></button><p class="m-b-none blue text-uppercase" style="line-height:29px">You did not select any filters.</p>').css("display","flex")):d.append(r)}};e.updateAvailabilityNumbers(),i.on("click",e.navigateTabs),o.on("click",e.expandFilters),n.on("click",function(){e.resetFilters(),e.expandFilters()}),c.on("click",e.applyFilters),d.on("click","#close-filter-msg",function(){d.slideUp().html("")}),d.on("click",".delete-filter-btn",function(){if($(this).parent().remove(),u--,0===u&&(d.slideUp().html(""),e.resetFilters()),$(this).hasClass("delete-filter-btn__checkbox")){var t=$(this).parent().text();a.find(":checkbox[value='"+$.trim(t)+"']").prop("checked",!1)}else $(this).hasClass("delete-filter-btn__max-rent")?v.val(""):$(this).hasClass("delete-filter-btn__bathrooms")?p.find("option:selected").prop("selected",!1):$(this).hasClass("delete-filter-btn__move-date")&&h.find("option:selected").prop("selected",!1)}),f.on("click",e.navigateToFirstView),w.on("click",function(){A?e.showStackedLevels():e.navigateToSecondView()}),m.on("click",e.navigateToSecondExpandedView),C.on("click",e.navigateToThirdView),T.on({hover:function(){var e=$(this).attr("id"),t=e.substr(e.length-1);$("#popover"+t).find(".popover-title").addClass("in-focus")},mouseout:function(){$(".first-view-popovers .popover-title").removeClass("in-focus")}}),T.on("click",function(){A&&e.showStackedLevels(),"link0"===$(this).attr("id")?e.showThirdStack():"link1"===$(this).attr("id")&&e.showSecondStack(),"link2"===$(this).attr("id")&&e.showFirstStack(),e.navigateToSecondView()}),$(".first-view-popovers").on("click",function(){"popover0"===$(this).attr("id")?e.showThirdStack():"popover1"===$(this).attr("id")&&e.showSecondStack(),"popover2"===$(this).attr("id")&&e.showFirstStack(),A&&e.showStackedLevels(),e.navigateToSecondView()}),F.on("click",function(){A?e.showStackedLevels():$(window).width()>=1400?(e.navigateToSecondView(),_.removeClass("expanded-view-with-detail")):(e.navigateToFirstView(),_.removeClass("expanded-view-with-detail"))}),O.on("click",function(){$(this).addClass("level--current"),N=parseInt($(this).attr("data-levelnum"),10),console.log("selectedLevel is "+N),e.showLevel()}),P.on("click",function(){A?e.navigate("Down"):_.hasClass("second-view__part1")?e.showSecondStack():_.hasClass("second-view__part2")&&e.showThirdStack()}),U.on("click",function(){A?e.navigate("Up"):_.hasClass("second-view__part3")?e.showSecondStack():_.hasClass("second-view__part2")&&e.showFirstStack()}),D.on("click",function(){e.showStackedLevels(),e.navigateToSecondView()}),q.on("click",function(t){t.stopPropagation(),$(".second-view").addClass("expanded-view-with-detail"),e.navigateToThirdView()})}function t(){}function s(e){E=$("."+e).find(".popover").addClass("first-view-popovers"),T.each(function(e){$(this).attr("id","link"+e)}),E.each(function(e){$(this).attr("id","popover"+e)})}var a,i,o,l,n,c,d,r,v,p,h,u,b,f,w,m,C,g,k,_,x,T,S,F,y,L,V,P,U,D,N,M,A,z,E,I,O,j,q;$(document).ready(e)}(jQuery);