!function($){"use strict";function e(){i=$("#more-filters"),t=$(".nav-icon"),a=$("#more-filters-btn"),n=$(".more-filters-container"),l=$("#clear-all-filters"),c=$("#interactive-site-map"),d=$(".first-view-btn"),v=$(".second-view-btn"),r=$(".second-expanded-view-btn"),u=$(".third-view-btn"),w=$(".views"),p=$(".second-view"),h=$(".first-view svg"),b=null,g=$(".link-for-blocks"),f=$(".first-view .link-for-blocks"),k=$(".back-btn"),C=$(".second-view-header"),T=$(".level--1"),m=$(".levelnav"),_=$(".levelnav__button--up"),x=$(".levelnav__button--down"),S=$(".levelnav__button--all-levels"),F=null,V=null,y=!1,L=!1,P=null,D=$(".levels"),N=$(".level"),z=null,E=$(".available-unit"),O=!1,i.find(":focusable").attr("tabindex","-1");var e=location.href;console.log(e),$(window).width()>=1400&&(O=!0),$('[data-toggle="popover"]').popover("show"),s("first-view"),$(".first-view h2").on("click",function(){o.showPopovers()}),$(window).resize(function(){o.hidePopovers(),clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){o.showPopovers()},800)}),$("#unitDetailTabs a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(".carousel").carousel();var o={navigateTabs:function(){t.removeClass("active-tab")},navigateToFirstView:function(){o.hidePopovers(),c.removeClass("view-change-1 view-change-2"),o.showPopovers(),o.navigateTabs(),d.addClass("active-tab"),setTimeout(function(){o.showPopovers()},800)},navigateToSecondView:function(){o.hidePopovers(),c.addClass("view-change-1").removeClass("view-change-2"),o.navigateTabs(),v.addClass("active-tab"),setTimeout(function(){o.showPopovers()},800)},navigateToSecondExpandedView:function(){c.addClass("view-change-1").removeClass("view-change-2"),o.navigateTabs(),r.addClass("active-tab"),T.trigger("click"),$('[data-toggle="popover"]').popover("show")},navigateToThirdView:function(){c.addClass("view-change-1 view-change-2"),o.navigateTabs(),u.addClass("active-tab"),p.addClass("expanded-view-with-detail")},showFirstStack:function(){p.removeClass("second-view__part2 second-view__part3"),p.addClass("second-view__part1"),x.addClass("boxbutton--disabled"),_.removeClass("boxbutton--disabled"),O&&(g.trigger("mouseout"),$("#link2").trigger("mouseenter"),$(".building-blocks").css("opacity",".1"),$("#link2 .building-blocks").css("opacity",".5"))},showSecondStack:function(){p.removeClass("second-view__part1 second-view__part3"),p.addClass("second-view__part2"),_.removeClass("boxbutton--disabled"),x.removeClass("boxbutton--disabled"),O&&(g.trigger("mouseout"),$("#link1").trigger("mouseenter"),$(".building-blocks").css("opacity",".1"),$("#link1 .building-blocks").css("opacity",".5"))},showThirdStack:function(){p.removeClass("second-view__part1 second-view__part2"),p.addClass("second-view__part3"),_.addClass("boxbutton--disabled"),x.removeClass("boxbutton--disabled"),O&&(g.trigger("mouseout"),$("#link0").trigger("mouseenter"),$(".building-blocks").css("opacity",".1"),$("#link0 .building-blocks").css("opacity",".5"))},showPopovers:function(){f.popover("show")},hidePopovers:function(){f.popover("hide")},showLevel:function(){V=$("[data-levelnum]").length,D.addClass("levels--open levels--selected-"+F),o.navigateTabs(),r.addClass("active-tab"),z=C.text(),C.text("Floor "+F).css("color","#04b5fd"),k.addClass("hidden"),S.removeClass("hidden"),o.setNavigationState(),y=!0},setNavigationState:function(){1===F?x.addClass("boxbutton--disabled"):x.removeClass("boxbutton--disabled"),F===V?_.addClass("boxbutton--disabled"):_.removeClass("boxbutton--disabled")},showStackedLevels:function(){if(!y)return!1;y=!1,D.removeClass("levels--open levels--selected-"+F),$(".level--current").removeClass("level--current"),k.removeClass("hidden"),S.addClass("hidden"),o.navigateTabs(),v.addClass("active-tab"),C.text(z).css("color","")},navigate:function(e){if(!y)return!1;L=!0,console.log("selectedLevel is "+F);var s=F;console.log("prevSelectedLevel "+s),console.log(N);var i=$(".level--"+F);if(console.log(i),"Up"===e&&s>1)--F,console.log("selectedLevel-- is "+F);else{if(!("Down"===e&&s<V))return L=!1,!1;++F,console.log("selectedLevel++ is "+F)}o.setNavigationState(),i.addClass("level--moveOut"+e);var t=F;console.log("nextLevelNum is "+t);var a=$(".level--"+t);console.log(a),a.addClass("level--current"),i.removeClass("level--moveOut"+e),setTimeout(function(){i.removeClass("level--current")},60),D.removeClass("levels--selected-"+s),D.addClass("levels--selected-"+F),C.text("Floor "+F),L=!1},expandFilters:function(){i.hasClass("open")?(n.animate({opacity:0},200,function(){i.removeClass("open"),o.showPopovers()}),$(this).text("+ More Filters"),i.find(":focusable").attr("tabindex","-1")):(i.addClass("open").find(":focusable").attr("tabindex","0").eq(0).focus(),$(this).text("- Less Filters"),n.delay(200).animate({opacity:1},200),o.hidePopovers())},resetFilters:function(){$("#map-header, #more-filters").find(":input",":checkbox").val("").prop("checked",!1).prop("selected",!1),$("#any-ba").prop("checked",!0)}};t.on("click",o.navigateTabs),a.on("click",o.expandFilters),l.on("click",o.resetFilters),$("#link0").on("click",o.showThirdStack),$("#link1").on("click",o.showSecondStack),$("#link2").on("click",o.showFirstStack),d.on("click",o.navigateToFirstView),v.on("click",function(){y?o.showStackedLevels():o.navigateToSecondView()}),r.on("click",o.navigateToSecondExpandedView),u.on("click",o.navigateToThirdView),g.on({hover:function(){var e=$(this).attr("id"),o=e.substr(e.length-1);$("#popover"+o).find(".popover-title").addClass("in-focus")},mouseout:function(){$(".first-view-popovers .popover-title").removeClass("in-focus")}}),g.on("click",function(){o.navigateToSecondView();var e=this;console.log(e),setTimeout(function(){$(e).trigger("mouseenter"),console.log($(e))},800)}),$(".link-for-blocks, .first-view-popovers .popover-title, .first-view-popovers .popover-availability").on("click",o.navigateToSecondView),k.on("click",function(){y?o.showStackedLevels():$(window).width()>=1400?(o.navigateToSecondView(),p.removeClass("expanded-view-with-detail")):(o.navigateToFirstView(),p.removeClass("expanded-view-with-detail"))}),N.on("click",function(){console.log($(this)),$(this).addClass("level--current"),F=parseInt($(this).attr("data-levelnum"),10),console.log("selectedLevel is "+F),o.showLevel()}),_.on("click",function(){y?o.navigate("Down"):p.hasClass("second-view__part1")?o.showSecondStack():p.hasClass("second-view__part2")&&o.showThirdStack()}),x.on("click",function(){y?o.navigate("Up"):p.hasClass("second-view__part3")?o.showSecondStack():p.hasClass("second-view__part2")&&o.showFirstStack()}),S.on("click",function(){o.showStackedLevels(),o.navigateToSecondView()}),E.on("click",function(e){e.stopPropagation(),$(".second-view").addClass("expanded-view-with-detail"),o.navigateToThirdView()})}function o(){}function s(e){P=$("."+e).find(".popover").addClass("first-view-popovers"),g.each(function(e){$(this).attr("id","link"+e)}),P.each(function(e){$(this).attr("id","popover"+e)})}var i,t,a,n,l,c,d,v,r,u,w,p,h,b,g,f,k,C,m,T,_,x,S,F,V,y,L,P,D,N,z,E,O;$(document).ready(e)}(jQuery);