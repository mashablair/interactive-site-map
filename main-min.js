!function($){"use strict";function e(){t=$("#more-filters"),a=$(".nav-icon"),i=$("#more-filters-btn"),l=$(".more-filters-container"),n=$("#clear-all-filters"),d=$("#apply-filters-btn"),c=$(".filter-selections"),p=$("#interactive-site-map"),h=$(".first-view-btn"),w=$(".second-view-btn"),u=$(".second-expanded-view-btn"),f=$(".third-view-btn"),b=$(".views"),C=$(".first-view"),g=$(".second-view"),k=$(".first-view svg"),_=$(".link-for-blocks"),T=$(".first-view .link-for-blocks"),x=$(".back-btn"),S=$(".second-view-header"),y=$(".level--1"),F=$(".levelnav"),L=$(".levelnav__button--up"),V=$(".levelnav__button--down"),P=$(".levelnav__button--all-levels"),M=!1,N=!1,A=$(".levels"),E=$(".level"),j=$(".available-unit"),t.find(":focusable").attr("tabindex","-1"),c.hide();var e=location.href;console.log(e),$('[data-toggle="popover"]').popover("show"),o("first-view"),$(".first-view h2").on("click",function(){s.showPopovers()}),$(window).resize(function(){s.hidePopovers(),clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){s.showPopovers()},800)}),$("#unitDetailTabs a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(".carousel").carousel();var s={navigateTabs:function(){a.removeClass("active-tab")},navigateToFirstView:function(){s.hidePopovers(),p.removeClass("view-change-1 view-change-2"),s.showPopovers(),s.navigateTabs(),h.addClass("active-tab"),setTimeout(function(){s.showPopovers()},800)},navigateToSecondView:function(){p.hasClass("view-change-1")||(p.addClass("view-change-1").removeClass("view-change-2"),s.navigateTabs(),w.addClass("active-tab"),s.hidePopovers(),setTimeout(function(){s.showPopovers()},800))},navigateToSecondExpandedView:function(){p.addClass("view-change-1").removeClass("view-change-2"),s.navigateTabs(),u.addClass("active-tab"),y.trigger("click"),$('[data-toggle="popover"]').popover("show")},navigateToThirdView:function(){p.addClass("view-change-1 view-change-2"),s.navigateTabs(),f.addClass("active-tab"),g.addClass("expanded-view-with-detail")},showFirstStack:function(){g.removeClass("second-view__part2 second-view__part3"),g.addClass("second-view__part1"),V.addClass("boxbutton--disabled"),L.removeClass("boxbutton--disabled"),C.addClass("first-stack-displayed"),C.removeClass("second-stack-displayed third-stack-displayed"),S.text("Floors 1 - 4 (Lower Third)")},showSecondStack:function(){g.removeClass("second-view__part1 second-view__part3"),g.addClass("second-view__part2"),L.removeClass("boxbutton--disabled"),V.removeClass("boxbutton--disabled"),C.addClass("second-stack-displayed"),C.removeClass("first-stack-displayed third-stack-displayed"),S.text("Floors 5 - 8 (Middle Third)")},showThirdStack:function(){g.removeClass("second-view__part1 second-view__part2"),g.addClass("second-view__part3"),L.addClass("boxbutton--disabled"),V.removeClass("boxbutton--disabled"),C.addClass("third-stack-displayed"),C.removeClass("first-stack-displayed second-stack-displayed"),S.text("Floors 9 - 12 (Upper Third)")},showPopovers:function(){T.popover("show")},hidePopovers:function(){T.popover("hide")},showLevel:function(){U=$("[data-levelnum]").length,A.addClass("levels--open levels--selected-"+D),s.navigateTabs(),u.addClass("active-tab"),O=S.text();var e=$(".level--current").attr("data-floor");S.text("Floor "+e).css("color","#04b5fd"),x.addClass("hidden"),P.removeClass("hidden"),s.setNavigationState(),M=!0},setNavigationState:function(){1===D?V.addClass("boxbutton--disabled"):V.removeClass("boxbutton--disabled"),D===U?L.addClass("boxbutton--disabled"):L.removeClass("boxbutton--disabled")},showStackedLevels:function(){if(!M)return!1;M=!1,A.removeClass("levels--open levels--selected-"+D),$(".level--current").removeClass("level--current"),x.removeClass("hidden"),P.addClass("hidden"),s.navigateTabs(),w.addClass("active-tab"),g.hasClass("second-view__part1")?S.text("Floors 1 - 4 (Lower Third)"):g.hasClass("second-view__part2")?S.text("Floors 5 - 8 (Middle Third)"):g.hasClass("second-view__part3")&&S.text("Floors 9 - 12 (Upper Third)"),S.css("color","")},navigate:function(e){if(!M)return!1;N=!0,console.log("selectedLevel is "+D);var o=D;console.log("prevSelectedLevel "+o),console.log(E);var t=$(".level--"+D);if(console.log(t),"Up"===e&&o>1)--D,console.log("selectedLevel-- is "+D);else{if(!("Down"===e&&o<U))return N=!1,!1;++D,console.log("selectedLevel++ is "+D)}s.setNavigationState(),t.addClass("level--moveOut"+e);var a=D;console.log("nextLevelNum is "+a);var i=$(".level--"+a);console.log(i),i.addClass("level--current"),t.removeClass("level--moveOut"+e),setTimeout(function(){t.removeClass("level--current")},60),A.removeClass("levels--selected-"+o),A.addClass("levels--selected-"+D),S.text("Floor "+D),N=!1},expandFilters:function(){t.hasClass("open")?(l.animate({opacity:0},200,function(){t.removeClass("open").addClass("hidden-from-interaction"),s.showPopovers()}),$(this).text("+ More Filters"),t.find(":focusable").attr("tabindex","-1")):(t.addClass("open").removeClass("hidden-from-interaction").find(":focusable").attr("tabindex","0").eq(0).focus(),$(this).text("- Less Filters"),l.delay(200).animate({opacity:1},200),s.hidePopovers())},resetFilters:function(){$("#map-header, #more-filters").find(":input",":checkbox").val("").prop("checked",!1).prop("selected",!1),$("#any-ba").prop("checked",!0),c.slideUp()},applyFilters:function(){c.slideDown(300).html('<p class="filter-selections__header font-bold">Filtered By: </p>'),s.buildActiveFiltersList()},buildActiveFiltersList:function(){r='<ul class="filter-selections__ul flex-container flex1 m-b-none">',v=0;var e=$("#filter-bedrooms"),s=$("#filter-max-rent");"all"!==e.val()&&(r+="<li>"+e.val()+"</li>",v++),""!==s.val()?(r+="<li>Max Rent: $"+s.val()+"</li>",v++):console.log(s.val()),r+="</ul>",0===v?(r=void 0,c.append('<p class="m-l-lg blue text-uppercase">You did not select any filters.</p>'),console.log("no lis")):(c.append(r),console.log("some lis"))}};a.on("click",s.navigateTabs),i.on("click",s.expandFilters),n.on("click",s.resetFilters),d.on("click",s.applyFilters),h.on("click",s.navigateToFirstView),w.on("click",function(){M?s.showStackedLevels():s.navigateToSecondView()}),u.on("click",s.navigateToSecondExpandedView),f.on("click",s.navigateToThirdView),_.on({hover:function(){var e=$(this).attr("id"),s=e.substr(e.length-1);$("#popover"+s).find(".popover-title").addClass("in-focus")},mouseout:function(){$(".first-view-popovers .popover-title").removeClass("in-focus")}}),_.on("click",function(){M&&s.showStackedLevels(),"link0"===$(this).attr("id")?s.showThirdStack():"link1"===$(this).attr("id")&&s.showSecondStack(),"link2"===$(this).attr("id")&&s.showFirstStack(),s.navigateToSecondView()}),$(".first-view-popovers").on("click",function(){"popover0"===$(this).attr("id")?s.showThirdStack():"popover1"===$(this).attr("id")&&s.showSecondStack(),"popover2"===$(this).attr("id")&&s.showFirstStack(),M&&s.showStackedLevels(),s.navigateToSecondView()}),x.on("click",function(){M?s.showStackedLevels():$(window).width()>=1400?(s.navigateToSecondView(),g.removeClass("expanded-view-with-detail")):(s.navigateToFirstView(),g.removeClass("expanded-view-with-detail"))}),E.on("click",function(){$(this).addClass("level--current"),D=parseInt($(this).attr("data-levelnum"),10),console.log("selectedLevel is "+D),s.showLevel()}),L.on("click",function(){M?s.navigate("Down"):g.hasClass("second-view__part1")?s.showSecondStack():g.hasClass("second-view__part2")&&s.showThirdStack()}),V.on("click",function(){M?s.navigate("Up"):g.hasClass("second-view__part3")?s.showSecondStack():g.hasClass("second-view__part2")&&s.showFirstStack()}),P.on("click",function(){s.showStackedLevels(),s.navigateToSecondView()}),j.on("click",function(e){e.stopPropagation(),$(".second-view").addClass("expanded-view-with-detail"),s.navigateToThirdView()})}function s(){}function o(e){z=$("."+e).find(".popover").addClass("first-view-popovers"),_.each(function(e){$(this).attr("id","link"+e)}),z.each(function(e){$(this).attr("id","popover"+e)})}var t,a,i,l,n,d,c,r,v,p,h,w,u,f,b,C,g,k,m,_,T,x,S,F,y,L,V,P,D,U,M,N,z,A,E,O,j;$(document).ready(e)}(jQuery);